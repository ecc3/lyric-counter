{"version":3,"sources":["utils.js","components/Loader.jsx","components/WordCloud.jsx","App.js","index.js"],"names":["getArtistId","artist","updateData","fetch","then","response","json","artistData","artistId","artists","id","getSongsByArtistId","catch","err","console","log","worksData","getAverageWordcountForSongs","works","songs","length","maxWordCount","minWordCount","totalWordCount","songCount","completedCount","allSongWords","forEach","song","title","lyricData","songWords","lyrics","split","concat","songWordCount","averageWordCount","toFixed","Loader","className","resizeStyle","display","alignItems","justifyContent","border","background","options","colors","enableTooltip","deterministic","fontFamily","fontSizes","fontStyle","fontWeight","padding","rotations","rotationAngles","scale","spiral","transitionDuration","WordCloud","props","wordsAndTotals","words","reduce","acc","val","test","toLowerCase","match","formattedWords","word","push","text","value","defaultSize","width","height","style","App","state","artistError","isLoading","showWordCloud","handleChange","target","setState","handleSubmit","event","preventDefault","handleClick","currentState","this","action","onSubmit","type","name","onChange","isNaN","onClick","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.97742d4e.chunk.js","sourcesContent":["export const getArtistId = (artist, updateData) => {\n  fetch(\n    `https://musicbrainz.org/ws/2/artist/?query=artist:${artist}%20&fmt=json`\n  )\n    .then(response => response.json())\n    .then(artistData => {\n      const artistId = artistData.artists[0].id;\n      getSongsByArtistId(artistId, artist, updateData);\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nconst getSongsByArtistId = (artistId, artist, updateData) => {\n  fetch(\n    `https://musicbrainz.org/ws/2/work?artist=${artistId}&fmt=json&limit=100`\n  )\n    .then(response => response.json())\n    .then(worksData => {\n      getAverageWordcountForSongs(worksData.works, artist, updateData);\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nconst getAverageWordcountForSongs = (songs, artist, updateData) => {\n  if (songs.length === 0) {\n    return updateData(\"\", \"\", \"\", [], true);\n  }\n  let totalWordCount = 0;\n  let maxWordCount;\n  let minWordCount;\n  let songCount = songs.length;\n  let completedCount = 0;\n  let allSongWords = [];\n  songs.forEach(song => {\n    fetch(`https://api.lyrics.ovh/v1/${artist}/${song.title}`)\n      .then(response => response.json())\n      .then(lyricData => {\n        const songWords = lyricData.lyrics.split(/\\s/);\n        allSongWords = allSongWords.concat(songWords);\n\n        const songWordCount = songWords.length;\n        totalWordCount += songWordCount;\n        completedCount++;\n\n        if (!minWordCount) {\n          minWordCount = songWordCount;\n          maxWordCount = songWordCount;\n        }\n        if (songWordCount < minWordCount) {\n          minWordCount = songWordCount;\n        }\n        if (songWordCount > maxWordCount) {\n          maxWordCount = songWordCount;\n        }\n        if (completedCount === songCount) {\n          const averageWordCount = (totalWordCount / songCount).toFixed(0);\n          updateData(\n            averageWordCount,\n            minWordCount,\n            maxWordCount,\n            allSongWords\n          );\n        }\n      })\n      .catch(err => {\n        songCount--;\n        if (completedCount === songCount) {\n          const averageWordCount = (totalWordCount / songCount).toFixed(0);\n          updateData(\n            averageWordCount,\n            minWordCount,\n            maxWordCount,\n            allSongWords\n          );\n        }\n      });\n  });\n};\n","import React from \"react\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\n\nconst Loader = () => {\n  return (\n    <div className=\"loader\">\n      <h2>LOADING</h2>\n      <ClipLoader />\n    </div>\n  );\n};\n\nexport default Loader;\n","import React from \"react\";\nimport ReactWordcloud from \"react-wordcloud\";\nimport { Resizable } from \"re-resizable\";\n\nconst resizeStyle = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  border: \"solid 1px #ddd\",\n  background: \"#ffffff\"\n};\n\nconst options = {\n  colors: [\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\", \"#9467bd\", \"#8c564b\"],\n  enableTooltip: true,\n  deterministic: false,\n  fontFamily: \"Open Sans\",\n  fontSizes: [5, 60],\n  fontStyle: \"normal\",\n  fontWeight: \"normal\",\n  padding: 1,\n  rotations: 3,\n  rotationAngles: [0, 90],\n  scale: \"sqrt\",\n  spiral: \"archimedean\",\n  transitionDuration: 1000\n};\n\nconst WordCloud = props => {\n  const { words } = props;\n\n  const wordsAndTotals = words.reduce((acc, val) => {\n    if (/[\\w]+/.test(val) && val.length > 5) {\n      val = val.toLowerCase().match(/[\\w']+/)[0];\n      acc[val] ? acc[val]++ : (acc[val] = 1);\n    }\n    return acc;\n  }, {});\n\n  const formattedWords = [];\n\n  for (const word in wordsAndTotals) {\n    formattedWords.push({\n      text: word,\n      value: wordsAndTotals[word]\n    });\n  }\n\n  return (\n    <Resizable\n      defaultSize={{\n        width: 600,\n        height: 300\n      }}\n      style={resizeStyle}\n    >\n      <div style={{ width: \"100%\", height: \"100%\" }}>\n        <ReactWordcloud options={options} words={formattedWords} />\n      </div>\n    </Resizable>\n  );\n};\n\nexport default WordCloud;\n","import React, { Component } from \"react\";\nimport { getArtistId } from \"./utils\";\nimport Loader from \"./components/Loader\";\nimport \"./App.css\";\nimport WordCloud from \"./components/WordCloud\";\n\nclass App extends Component {\n  state = {\n    artist: \"\",\n    averageWordCount: \"\",\n    minWordCount: \"\",\n    maxWordCount: \"\",\n    allSongWords: [],\n    artistError: false,\n    isLoading: false,\n    showWordCloud: false\n  };\n\n  handleChange = ({ target }) => {\n    if (target.value === \"\") {\n      this.setState({ artist: \"\", averageWordCount: \"\", allSongWords: [] });\n    } else this.setState({ artist: target.value, averageWordCount: \"\" });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    this.setState({ isLoading: true });\n    getArtistId(this.state.artist, this.updateData);\n  };\n\n  updateData = (\n    averageWordCount,\n    minWordCount,\n    maxWordCount,\n    allSongWords,\n    artistError\n  ) => {\n    this.setState({\n      averageWordCount,\n      minWordCount,\n      maxWordCount,\n      allSongWords,\n      artistError,\n      isLoading: false\n    });\n  };\n\n  handleClick = () => {\n    this.setState(currentState => {\n      return { showWordCloud: !currentState.showWordCloud };\n    });\n  };\n\n  render() {\n    const {\n      artist,\n      averageWordCount,\n      isLoading,\n      minWordCount,\n      maxWordCount,\n      allSongWords,\n      showWordCloud,\n      artistError\n    } = this.state;\n    return (\n      <main className=\"main\">\n        <div className=\"content\">\n          <form action=\"\" onSubmit={this.handleSubmit}>\n            Artist name:{\" \"}\n            <input\n              type=\"text\"\n              name=\"artist\"\n              value={artist}\n              onChange={this.handleChange}\n              className=\"submit\"\n            />\n            <br />\n            <input type=\"submit\" value=\"Submit\" className=\"submit\" />\n            {(isNaN(averageWordCount) || artistError) && (\n              <p>Not found. Please search for a different artist.</p>\n            )}\n            {averageWordCount && !isNaN(averageWordCount) && (\n              <div>\n                <p>\n                  Average words in songs by {artist}: {averageWordCount}\n                </p>\n                <p>Maximum words across songs sampled: {maxWordCount}</p>\n                <p>Minimum words across songs sampled: {minWordCount}</p>\n              </div>\n            )}\n            {isLoading && <Loader />}\n          </form>\n          <section>\n            <button onClick={this.handleClick} className=\"submit\">\n              {showWordCloud && \"Hide Word Cloud\"}\n              {!showWordCloud && \"Show Word Cloud\"}\n            </button>\n            {showWordCloud && !averageWordCount && (\n              <p>Please search for an artist</p>\n            )}\n            {showWordCloud && averageWordCount && (\n              <WordCloud words={allSongWords} />\n            )}\n          </section>\n        </div>\n      </main>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}